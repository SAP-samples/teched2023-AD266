<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Event Registration</title>
  <style>
    body {
      height: 100%;
      margin: 0;
      overflow: auto;
      padding:1em;
    }
    body::before {
      content: "";
      z-index:-1;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #88dd88, #8888dd);
      background-size: 150% 150%;
      animation: gradientAnimation 20s infinite;
    }
    @keyframes gradientAnimation {
      0% { background-position: 0% 0%; }
      50% { background-position: 100% 100%; }
      100% { background-position: 0% 0%; }
    }
    span {
      display: inline-block;
      padding: 0.5em 1em;
      font-size: 1.5em;
      border: 1px solid #666;
      border-radius: 0.3em;
      text-align: center;
      color: #335699;
      font-weight: bold;
      box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
    }
    label:hover span { background-position: 100% 0; box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15); }
    label:hover { cursor: pointer; }
    label > input { display: none; }
    label > input:checked + *:before { content:'✔️'; }
    label > input:active + *:before { content:'➕️'; }
    label > input + *:before { content:'✖️'; vertical-align: top; display: inline-block; padding: 0.3em 0.3em 0 0; font-size:0.6em; }
    label { display:block; margin: 1em; }

    #eventList > div:before { content: attr(alt); font-size: 1.5em; border-bottom: 2px dashed; }
  </style>
</head>
<body>
<h1>Event Registration</h1>
<div id="eventList">
  <!-- Events will be displayed here -->
  <!--
  <label for="a" onchange="registerForEvent('a')"><input id="a" type="radio"/><span>Fooo</span></label>
  <label for="b" onchange="registerForEvent('b')"><input id="b" type="radio"/><span>Bar</span></label>
  -->
</div>

<script>
  function serialize(session) {
    return '<label for="i'+session.id+'" onchange="registerForEvent(\''+session.id+'\',\''+session.title+'\')">'
      + '<input id="i'+session.id+'" type="radio"/>'
      + '<span>'+session.title+'</span>'
      + '</label>'
  }

  fetch('https://ad266-signup.cfapps.eu10-004.hana.ondemand.com/events')
    .then((response) => response.json())
    .then((events) => {
      const eventList = document.getElementById('eventList');
      events.forEach((event) => {
        const eventDiv = document.createElement('div');
        eventDiv.setAttribute('id', event.id);
        eventDiv.setAttribute('alt', event.name);
        eventDiv.innerHTML = event.sessions.map(serialize).join('');
        eventList.appendChild(eventDiv);
      });
    })
    .catch((error) => console.error('Error fetching events:', error));


  // Function to register for an event
  function registerForEvent(eventId, eventName) {
    fetch("/odata/v4/SignupService/signUp", {
      method: "POST",
      body: JSON.stringify({ session: eventName }),
      headers: { "Content-type": "application/json; charset=UTF-8" }
    });
  }
</script>
</body>
</html>
